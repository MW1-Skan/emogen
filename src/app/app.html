<div class="app-shell relative overflow-hidden">
  <app-floating-emoji-background />

  <div class="relative z-10 mx-auto flex min-h-screen max-w-6xl flex-col gap-8 px-4 py-10 sm:px-6 lg:px-8">
    <app-emoji-input
      [isGenerating]="state.isGenerating()"
      [initialPrompt]="state.prompt()"
      (submitted)="handlePromptSubmit($event)"
      (cleared)="handlePromptCleared()"
      (donate)="handleDonate()"
    />

    <app-results
      [result]="state.result()"
      [error]="state.error()"
      [isLoading]="state.isGenerating()"
      [canRegenerate]="state.canRegenerate()"
      [favoriteIds]="favoriteIds()"
      (regenerate)="handleRegenerate()"
      (favoriteToggle)="handleFavoriteToggle($event)"
      (copyEmoji)="handleCopyEmoji($event)"
    />

    <div class="grid gap-6 lg:grid-cols-2">
      <app-history [history]="state.history()" (selected)="handleHistorySelected($event)" />
      <app-favorites
        [favorites]="state.favorites()"
        (selected)="handleFavoriteSelected($event)"
        (removed)="handleFavoriteRemoved($event)"
      />
    </div>
  </div>

  <p-toast class="emogen-toast" position="top-right" [baseZIndex]="12000">
    <ng-template let-message pTemplate="message">
      <article
        class="emogen-toast-card"
        [class.emogen-toast-card-success]="message.severity === 'success'"
        [class.emogen-toast-card-info]="message.severity === 'info'"
        [class.emogen-toast-card-error]="message.severity === 'error'"
        role="status"
        aria-live="polite"
        (click)="handleToastClick()"
      >
        <div class="emogen-toast-content">
          <span class="emogen-toast-text">{{ message.detail }}</span>
        </div>
      </article>
    </ng-template>
  </p-toast>
</div>
